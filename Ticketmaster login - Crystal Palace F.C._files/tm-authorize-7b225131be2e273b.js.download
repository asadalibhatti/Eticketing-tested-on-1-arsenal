(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[845],{69125:function(e,t,r){(window.__NEXT_P=window.__NEXT_P||[]).push(["/tm-authorize",function(){return r(90953)}])},64480:function(e,t,r){"use strict";r.d(t,{R:function(){return a}});var a=Object.freeze({friendlies:{title:"Friendlies",description:"Friendlies matches for Crystal Palace team"},fixtures:{title:"Fixtures",description:"Fixtures for Crystal Palace for the ${season}, from competition"},results:{title:"Results",description:"All of the results for Crystal Palace for the current season, from all competitions including the Premier League, FA Cup & EFL Cup.",descriptionTeam:"results for Crystal Palace for the current season, from all competitions including the Premier League, FA Cup & EFL Cup."},leagueTable:{title:"League Table",description:"Check out Crystal Palace`s various teams: positions in the Premier League, Professional Development League, U18s Professional Development League and the FA Women`s Premier League."},newsPage:{title:"Page",description:"Get all the latest official news regarding Crystal Palace Football Club, including interviews, stories, match reports and features surrounding the Eagles first-team, development squad and academy."},memberships:{title:"Buy Memberships: Crystal Palace Ticketing",description:"All Membership Benefits"},palaceTv:{title:"Palace TV",description:"Watch the latest match highlights from our teams as well as pre and post match interviews and special features with players both past and present on Palace TV."},palaceTvTag:{title:"",description:"Watch the latest match highlights from our teams"},palaceTvPlus:{title:"Palace TV+",description:"Get closer to the action with Palace TV+."},squad:{title:"Squad",descFirstPart:"Find out all the information about Crystal Palace,",descSecondPart:"for the",descThirdPar:"season, including player profiles, biographies, stats, videos and photo galleries."},player:{title:"",descFirstPart:"Read Crystal Palace F.C's",descSecondPart:"'s player profile with all the latest information, stats, news and player highlights."},tickets:{title:"Tickets and Ticket Information",description:"Find out all the latest ticket news from Crystal Palace Football Club, including information about home matches at Selhurst Park and away games, Season Tickets and our range of Memberships."},allPodcasts:{title:"Palace Podcast",description:"Palace Podcast"},profile:{title:"Account details",description:"Manage your Palace account information"},resetPassword:{title:"Reset password",description:"Reset your password"},ticketmaster:{title:"Ticketmaster login",description:"Authorization and authentication page for Ticketmaster"},verifyEmail:{title:"Verify email",description:"Your email will be verified automatically"},forgotPassword:{title:"Forgot password",description:"Enter your email to reset the password"},signUp:{title:"Sign up",description:"Sign up for a new account"}})},90953:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return E}});var a=r(47568),i=r(20414),s=r(85893),n=r(67294),o=r(4190),c=r(11163),l=r(64480),u=r(1667),d=r(85878),p=r(47702),h=r(54908),f=r(95378),m=(r(28660),r(51438)),g=r(309),v=r(45466),P=r(6154),y=r(96803),_=function(){function e(){(0,m.Z)(this,e)}return e.prototype.fetchTicketmasterRedirectUrl=function(e){var t=this;return(0,a.Z)((function(){var r,a,s,n,o;return(0,i.__generator)(this,(function(i){switch(i.label){case 0:return i.trys.push([0,2,,3]),[4,P.Z.get(y.e.ssoEndpoints.ticketmasterToken,{headers:{Authorization:"Bearer ".concat(e)}})];case 1:return 200!==(r=i.sent()).status||"success"!==r.data.status?(t.logService.error("fetchTicketmasterRedirectUrl failed with (".concat(r.status,") (").concat(r.statusText,") (").concat(null===(a=r.data)||void 0===a?void 0:a.status,")")),[2,null]):[2,new URL(r.data.data.url)];case 2:return s=i.sent(),o=s,t.logService.info("fetchTicketmasterRedirectUrl failed with ".concat(null===o||void 0===o?void 0:o.code," : ").concat(null===o||void 0===o||null===(n=o.response)||void 0===n?void 0:n.data)),[2,null];case 3:return[2]}}))}))()},e}();(0,i.__decorate)([(0,g.f)(f.Z.ILogService),(0,i.__metadata)("design:type","undefined"===typeof ILogService?Object:ILogService)],_.prototype,"logService",void 0),_=(0,i.__decorate)([(0,v.b)()],_),h.Z.isBound(f.Z.ITicketmasterAuthService)||h.Z.bind(f.Z.ITicketmasterAuthService).to(_).inSingletonScope();var T=h.Z.get(f.Z.ITicketmasterAuthService),w=r(73077),k=r(52795),b=r(41043),C=r(94902),F=r(63853),L=r(4062);function S(e){return R.apply(this,arguments)}function R(){return(R=(0,a.Z)((function(e){var t;return(0,i.__generator)(this,(function(r){switch(r.label){case 0:return e?[4,T.fetchTicketmasterRedirectUrl(e)]:(k.G.error("JWT Token not found!"),[2,null]);case 1:return(t=r.sent())?[2,t]:(k.G.error("Invalid redirectUrl provided by Ticketmaster token endpoint!"),[2,null])}}))}))).apply(this,arguments)}function x(e){var t=(0,b.B8)(e);return t&&"string"===typeof t?t:(k.G.info("Redirect URL missing or invalid!"),null)}function E(){var e=(0,c.useRouter)(),t=(0,o.oR)(w.Mz),r=t.isLoggedIn,h=t.isImplicitLogin,f=t.hasCompletedTicketmasterRegistration,m=t.authToken,g=(0,n.useState)(!1),v=g[0],P=g[1];return(0,n.useEffect)((function(){function t(){return(t=(0,a.Z)((function(){var t,r;return(0,i.__generator)(this,(function(a){switch(a.label){case 0:return[4,S(m)];case 1:return(t=a.sent())?((r=x(e.query))&&t.searchParams.append("returnUrl",r),e.push(t.href),[2]):(P(!1),(0,L.NV)("An error has occurred. Please try again later.",6e4),[2])}}))}))).apply(this,arguments)}r?h&&!f||(P(!0),function(){t.apply(this,arguments)}()):(0,p.eY)()}),[r,h,f]),(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(C.Z,{title:l.R.ticketmaster.title,description:l.R.ticketmaster.description}),v&&(0,s.jsx)(F.lq,{options:{level:F.Op.PAGE_LEVEL}}),(0,s.jsx)(u.F,{children:(0,s.jsx)(d.U,{})})]})}},85878:function(e,t,r){"use strict";r.d(t,{U:function(){return c}});var a=r(85893),i=(r(67294),r(94184)),s=r.n(i),n=r(2604),o=r.n(n),c=function(e){var t=e.childCss;return(0,a.jsx)("div",{className:s()(o().spacer,o()[t||""])})}},94902:function(e,t,r){"use strict";r.d(t,{Z:function(){return c}});var a=r(85893),i=(r(67294),r(9008)),s=r.n(i),n=r(11163),o=r(22614);function c(e){var t=e.articleId,r=e.revalidatedTimestamp,i=e.description,c=e.title,l=e.ogImageUrl,u=(0,n.useRouter)().asPath;return(0,a.jsx)(s(),{children:o.j.getHubPageMetadata({title:c,description:i,ogImageUrl:l,urlPath:u,cmsArticleId:t,revalidatedTimestamp:r})})}},2604:function(e){e.exports={spacer:"header-spacer_spacer__o_Vec",newsPage:"header-spacer_newsPage__sssv6",player:"header-spacer_player__xdCJX",video:"header-spacer_video__GbLxx"}}},function(e){e.O(0,[6202,7296,1082,4758,5588,4138,2614,6238,7007,1865,9774,2888,179],(function(){return t=69125,e(e.s=t);var t}));var t=e.O();_N_E=t}]);